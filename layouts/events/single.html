{{ define "main" }}
<!-- Page Header -->
<div class="event-header py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="text-center">
                    <div class="event-meta mb-3">
                        <span class="badge bg-primary me-2">{{ .Params.eventType | default "Campaign Event" }}</span>
                        {{ if .Params.eventDate }}
                        <span class="text-muted">
                            <i class="far fa-calendar-alt me-1"></i>
                            {{ .Params.eventDate.Format "Monday, January 2, 2006" }}
                        </span>
                        {{ end }}
                    </div>
                    <h1 class="display-4 fw-bold text-uppercase mb-3">{{ .Title }}</h1>
                    {{ if .Params.subtitle }}
                    <p class="lead text-muted mb-4">{{ .Params.subtitle }}</p>
                    {{ end }}
                    
                    <!-- Event Details Cards -->
                    <div class="row g-4 mt-4">
                        {{ if .Params.eventDate }}
                        <div class="col-md-4">
                            <div class="event-detail-card text-center p-3 border rounded">
                                <i class="fas fa-clock text-primary mb-2"></i>
                                <h6 class="fw-bold mb-1">Date & Time</h6>
                                <p class="mb-0 small">
                                    {{ .Params.eventDate.Format "January 2, 2006" }}<br>
                                    {{ .Params.eventDate.Format "3:04 PM" }}{{ if .Params.endDate }} - {{ .Params.endDate.Format "3:04 PM" }}{{ end }}
                                </p>
                            </div>
                        </div>
                        {{ end }}
                        {{ if .Params.location }}
                        <div class="col-md-4">
                            <div class="event-detail-card text-center p-3 border rounded">
                                <i class="fas fa-map-marker-alt text-primary mb-2"></i>
                                <h6 class="fw-bold mb-1">Location</h6>
                                <p class="mb-0 small">{{ .Params.location }}
                                {{ if .Params.address }}<br><span class="text-muted">{{ .Params.address }}</span>{{ end }}
                                </p>
                            </div>
                        </div>
                        {{ end }}
                        {{ if .Params.ticketPrice }}
                        <div class="col-md-4">
                            <div class="event-detail-card text-center p-3 border rounded">
                                <i class="fas fa-ticket-alt text-primary mb-2"></i>
                                <h6 class="fw-bold mb-1">Cost</h6>
                                <p class="mb-0 small text-success fw-bold">{{ .Params.ticketPrice }}</p>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
                        <a href="mailto:events@votevega.nyc?subject=RSVP: {{ .Title }}" class="btn btn-primary btn-lg">
                            <i class="fas fa-check me-2"></i>RSVP Now
                        </a>
                        {{ if .Params.address }}
                        <a href="https://maps.google.com/?q={{ .Params.address | urlquery }}" target="_blank" class="btn btn-outline-secondary btn-lg">
                            <i class="fas fa-map-marker-alt me-2"></i>Get Directions
                        </a>
                        {{ end }}
                        <a href="javascript:void(0)" onclick="shareEvent()" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-share me-2"></i>Share Event
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Event Content -->
<div class="event-content py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="event-article">
                    {{ .Content }}
                </div>
            </div>
            
            <!-- Event Sidebar -->
            <div class="col-lg-4">
                <div class="event-sidebar">
                    <!-- Quick Info -->
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h5 class="card-title mb-0"><i class="fas fa-info-circle me-2"></i>Event Info</h5>
                        </div>
                        <div class="card-body">
                            {{ if .Params.eventDate }}
                            <div class="mb-3">
                                <strong><i class="far fa-calendar-alt me-2 text-primary"></i>When:</strong><br>
                                <span class="ms-4">{{ .Params.eventDate.Format "Monday, January 2, 2006" }}</span><br>
                                <span class="ms-4">{{ .Params.eventDate.Format "3:04 PM" }}{{ if .Params.endDate }} - {{ .Params.endDate.Format "3:04 PM" }}{{ end }}</span>
                            </div>
                            {{ end }}
                            {{ if .Params.location }}
                            <div class="mb-3">
                                <strong><i class="fas fa-map-marker-alt me-2 text-primary"></i>Where:</strong><br>
                                <span class="ms-4">{{ .Params.location }}</span>
                                {{ if .Params.address }}<br><span class="ms-4 text-muted">{{ .Params.address }}</span>{{ end }}
                            </div>
                            {{ end }}
                            {{ if .Params.ticketPrice }}
                            <div class="mb-3">
                                <strong><i class="fas fa-dollar-sign me-2 text-primary"></i>Cost:</strong><br>
                                <span class="ms-4 text-success fw-bold">{{ .Params.ticketPrice }}</span>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    
                    <!-- Contact Info -->
                    <div class="card mb-4">
                        <div class="card-header bg-secondary text-white">
                            <h5 class="card-title mb-0"><i class="fas fa-phone me-2"></i>Contact</h5>
                        </div>
                        <div class="card-body">
                            <p class="mb-2">Questions about this event?</p>
                            <p class="mb-1"><strong>Email:</strong> <a href="mailto:events@votevega.nyc">events@votevega.nyc</a></p>
                            <p class="mb-1"><strong>Phone:</strong> (718) 555-0127</p>
                            <p class="mb-0"><strong>Text:</strong> "EVENT" to (718) 555-0100</p>
                        </div>
                    </div>
                    
                    <!-- Share Options -->
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5 class="card-title mb-0"><i class="fas fa-share-alt me-2"></i>Share This Event</h5>
                        </div>
                        <div class="card-body">
                            <p class="mb-3">Help spread the word!</p>
                            <div class="d-grid gap-2">
                                <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink }}" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="fab fa-facebook me-2"></i>Share on Facebook
                                </a>
                                <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title | urlquery }}" target="_blank" class="btn btn-outline-info btn-sm">
                                    <i class="fab fa-twitter me-2"></i>Share on Twitter
                                </a>
                                <a href="mailto:?subject={{ .Title | urlquery }}&body=Join me at this event: {{ .Permalink }}" class="btn btn-outline-secondary btn-sm">
                                    <i class="fas fa-envelope me-2"></i>Share via Email
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Back to Events -->
        <div class="row justify-content-center mt-5">
            <div class="col-12 text-center">
                <a href="/events/" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-arrow-left me-2"></i>Back to All Events
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Add to Calendar Section -->
{{ if .Params.eventDate }}
<div class="add-to-calendar py-4 bg-light">
    <div class="container text-center">
        <h4 class="mb-3">Add This Event to Your Calendar</h4>
        <div class="d-flex flex-wrap justify-content-center gap-2">
            <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text={{ .Title | urlquery }}&dates={{ .Params.eventDate.Format "20060102T150405Z" }}/{{ if .Params.endDate }}{{ .Params.endDate.Format "20060102T150405Z" }}{{ else }}{{ .Params.eventDate.Add (time.ParseDuration "2h") | dateFormat "20060102T150405Z" }}{{ end }}&details={{ .Description | urlquery }}&location={{ .Params.address | urlquery }}" target="_blank" class="btn btn-outline-primary btn-sm">
                <i class="fab fa-google me-2"></i>Google Calendar
            </a>
            <a href="https://outlook.live.com/calendar/0/deeplink/compose?subject={{ .Title | urlquery }}&startdt={{ .Params.eventDate.Format "2006-01-02T15:04:05" }}&enddt={{ if .Params.endDate }}{{ .Params.endDate.Format "2006-01-02T15:04:05" }}{{ else }}{{ .Params.eventDate.Add (time.ParseDuration "2h") | dateFormat "2006-01-02T15:04:05" }}{{ end }}&body={{ .Description | urlquery }}&location={{ .Params.address | urlquery }}" target="_blank" class="btn btn-outline-primary btn-sm">
                <i class="fab fa-microsoft me-2"></i>Outlook
            </a>
        </div>
    </div>
</div>
{{ end }}

<script>
function shareEvent() {
    if (navigator.share) {
        navigator.share({
            title: '{{ .Title }}',
            text: '{{ .Description }}',
            url: window.location.href
        });
    } else {
        // Fallback - copy link to clipboard
        navigator.clipboard.writeText(window.location.href).then(function() {
            alert('Event link copied to clipboard!');
        });
    }
}
</script>
{{ end }}
